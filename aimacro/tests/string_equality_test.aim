# =============================================================================
# TEST: string_equality_test.aim
# Testing hardened string equality with dynamic strings
# =============================================================================

def main():
    print("=== STRING EQUALITY HARDENING TEST ===")
    print("")
    
    # -----------------------------------------
    # TEST 1: Literal comparison (worked before)
    # -----------------------------------------
    print("TEST 1: Literal comparison")
    name = "Claude"
    if name == "Claude":
        print("PASS: Literal match works")
    else:
        print("FAIL: Literal match broken")
    end
    print("")
    
    # -----------------------------------------
    # TEST 2: Dynamic string comparison (THE REAL TEST)
    # This creates a NEW string via concatenation
    # -----------------------------------------
    print("TEST 2: Dynamic string comparison")
    a = "Hello"
    b = "Hel" + "lo"
    
    print("a = Hello (direct)")
    print("b = Hel + lo (concatenated)")
    
    if a == b:
        print("PASS: Dynamic strings match!")
    else:
        print("FAIL: Dynamic strings don't match (pointer comparison)")
    end
    print("")
    
    # -----------------------------------------
    # TEST 3: Dynamic inequality
    # -----------------------------------------
    print("TEST 3: Dynamic string inequality")
    x = "foo" + "bar"
    y = "baz" + "qux"
    
    if x != y:
        print("PASS: foobar != bazqux")
    else:
        print("FAIL: foobar should != bazqux")
    end
    print("")
    
    # -----------------------------------------
    # TEST 4: Compare with str() result
    # -----------------------------------------
    print("TEST 4: Compare with str() result")
    num_str = str(42)
    expected = "42"
    
    if num_str == expected:
        print("PASS: str(42) == 42")
    else:
        print("FAIL: str(42) should == 42")
    end
    print("")
    
    # -----------------------------------------
    # TEST 5: Empty string comparison
    # -----------------------------------------
    print("TEST 5: Empty string comparison")
    empty1 = ""
    empty2 = ""
    
    if empty1 == empty2:
        print("PASS: Empty strings equal")
    else:
        print("FAIL: Empty strings should be equal")
    end
    
    nonempty = "x"
    if empty1 != nonempty:
        print("PASS: Empty != non-empty")
    else:
        print("FAIL: Empty should != non-empty")
    end
    print("")
    
    # -----------------------------------------
    # TEST 6: Case sensitivity
    # -----------------------------------------
    print("TEST 6: Case sensitivity")
    lower = "hello"
    upper = "HELLO"
    
    if lower != upper:
        print("PASS: hello != HELLO (case sensitive)")
    else:
        print("FAIL: Should be case sensitive")
    end
    print("")
    
    print("=== ALL TESTS COMPLETE ===")
end