# =============================================================================
# AIMACRO COMPREHENSIVE STRESS TEST
# Tests EVERY language feature to find gaps
# =============================================================================

# =============================================================================
# SECTION 1: BASIC TYPES AND LITERALS
# =============================================================================

def test_integer_literals():
    print("=== INTEGER LITERALS ===")
    a = 0
    b = 42
    c = -100
    d = 999999999
    print("Zero: " + str(a))
    print("Positive: " + str(b))
    print("Negative: " + str(c))
    print("Large: " + str(d))
end

def test_string_literals():
    print("=== STRING LITERALS ===")
    empty = ""
    simple = "hello"
    with_spaces = "hello world"
    with_escapes = "line1\nline2\ttabbed"
    single_char = "x"
    print("Empty len: " + str(len(empty)))
    print("Simple: " + simple)
    print("Spaces: " + with_spaces)
    print("Escapes: " + with_escapes)
    print("Single: " + single_char)
end

def test_boolean_literals():
    print("=== BOOLEAN LITERALS ===")
    t = True
    f = False
    print("True as int: " + str(t))
    print("False as int: " + str(f))
end

# =============================================================================
# SECTION 2: ARITHMETIC OPERATIONS
# =============================================================================

def test_arithmetic():
    print("=== ARITHMETIC ===")
    a = 10
    b = 3
    
    print("10 + 3 = " + str(a + b))
    print("10 - 3 = " + str(a - b))
    print("10 * 3 = " + str(a * b))
    print("10 / 3 = " + str(a / b))
    print("10 % 3 = " + str(a % b))
    
    # Negative numbers
    c = -5
    print("-5 + 3 = " + str(c + b))
    print("-5 * 3 = " + str(c * b))
    
    # Order of operations (needs parens in AILang)
    print("2 + 3 * 4 = " + str(2 + 3 * 4))
    print("(2 + 3) * 4 = " + str((2 + 3) * 4))
end

def test_augmented_assignment():
    print("=== AUGMENTED ASSIGNMENT ===")
    x = 10
    x += 5
    print("10 += 5 = " + str(x))
    
    x = 10
    x -= 3
    print("10 -= 3 = " + str(x))
    
    x = 10
    x *= 2
    print("10 *= 2 = " + str(x))
    
    x = 10
    x /= 2
    print("10 /= 2 = " + str(x))
end

# =============================================================================
# SECTION 3: COMPARISON OPERATIONS
# =============================================================================

def test_comparisons():
    print("=== COMPARISONS ===")
    a = 5
    b = 10
    c = 5
    
    print("5 == 5: " + str(a == c))
    print("5 == 10: " + str(a == b))
    print("5 != 10: " + str(a != b))
    print("5 < 10: " + str(a < b))
    print("5 <= 5: " + str(a <= c))
    print("10 > 5: " + str(b > a))
    print("10 >= 10: " + str(b >= b))
end

def test_string_comparisons():
    print("=== STRING COMPARISONS ===")
    s1 = "hello"
    s2 = "hello"
    s3 = "world"
    
    print("hello == hello: " + str(s1 == s2))
    print("hello == world: " + str(s1 == s3))
    print("hello != world: " + str(s1 != s3))
end

# =============================================================================
# SECTION 4: LOGICAL OPERATIONS
# =============================================================================

def test_logical_ops():
    print("=== LOGICAL OPERATIONS ===")
    t = True
    f = False
    
    print("True and True: " + str(t and t))
    print("True and False: " + str(t and f))
    print("True or False: " + str(t or f))
    print("False or False: " + str(f or f))
    print("not True: " + str(not t))
    print("not False: " + str(not f))
    
    # Complex expressions
    print("True and not False: " + str(t and not f))
    print("(True or False) and True: " + str((t or f) and t))
end

# =============================================================================
# SECTION 5: CONTROL FLOW
# =============================================================================

def test_if_elif_else():
    print("=== IF/ELIF/ELSE ===")
    x = 5
    
    if x < 0:
        print("negative")
    elif x == 0:
        print("zero")
    elif x < 10:
        print("small positive")
    else:
        print("large positive")
    end
    
    # Nested if
    if x > 0:
        if x < 10:
            print("between 0 and 10")
        end
    end
end

def test_while_loop():
    print("=== WHILE LOOP ===")
    i = 0
    while i < 5:
        print("i = " + str(i))
        i += 1
    end
    
    # While with break
    print("While with break:")
    i = 0
    while True:
        if i >= 3:
            break
        end
        print("  i = " + str(i))
        i += 1
    end
    
    # While with continue
    print("While with continue (skip 2):")
    i = 0
    while i < 5:
        i += 1
        if i == 2:
            continue
        end
        print("  i = " + str(i))
    end
end

def test_for_loop():
    print("=== FOR LOOP ===")
    
    # Simple range
    print("for i in range(5):")
    for i in range(5):
        print("  i = " + str(i))
    end
    
    # Range with start
    print("for i in range(2, 6):")
    for i in range(2, 6):
        print("  i = " + str(i))
    end
    
    # Range with step
    print("for i in range(0, 10, 2):")
    for i in range(0, 10, 2):
        print("  i = " + str(i))
    end
    
    # For with break
    print("For with break at 3:")
    for i in range(10):
        if i == 3:
            break
        end
        print("  i = " + str(i))
    end
    
    # For with continue
    print("For with continue (skip 2):")
    for i in range(5):
        if i == 2:
            continue
        end
        print("  i = " + str(i))
    end
end

# =============================================================================
# SECTION 6: FUNCTIONS
# =============================================================================

def simple_func():
    print("Simple function called")
end

def func_with_args(a, b):
    print("Args: " + str(a) + ", " + str(b))
end

def func_with_return(x):
    return x * 2
end

def func_with_early_return(x):
    if x < 0:
        return -1
    end
    if x == 0:
        return 0
    end
    return 1
end

def recursive_factorial(n):
    if n <= 1:
        return 1
    end
    return n * recursive_factorial(n - 1)
end

def recursive_fib(n):
    if n <= 1:
        return n
    end
    return recursive_fib(n - 1) + recursive_fib(n - 2)
end

def test_functions():
    print("=== FUNCTIONS ===")
    simple_func()
    func_with_args(10, 20)
    print("func_with_return(5) = " + str(func_with_return(5)))
    print("early_return(-1) = " + str(func_with_early_return(-1)))
    print("early_return(0) = " + str(func_with_early_return(0)))
    print("early_return(1) = " + str(func_with_early_return(1)))
    print("factorial(5) = " + str(recursive_factorial(5)))
    print("fib(10) = " + str(recursive_fib(10)))
end

# =============================================================================
# SECTION 7: LISTS
# =============================================================================

def test_list_basics():
    print("=== LIST BASICS ===")
    
    # Empty list
    empty = []
    print("Empty list len: " + str(len(empty)))
    
    # List literal
    nums = [1, 2, 3, 4, 5]
    print("List len: " + str(len(nums)))
    print("First: " + str(nums[0]))
    print("Last: " + str(nums[4]))
    
    # Modify
    nums[0] = 100
    print("After nums[0]=100: " + str(nums[0]))
end

def test_list_append():
    print("=== LIST APPEND ===")
    arr = []
    arr.append(10)
    arr.append(20)
    arr.append(30)
    print("After 3 appends, len: " + str(len(arr)))
    print("Values: " + str(arr[0]) + ", " + str(arr[1]) + ", " + str(arr[2]))
end

def test_list_iteration():
    print("=== LIST ITERATION ===")
    nums = [10, 20, 30, 40, 50]
    
    # Index-based iteration
    i = 0
    while i < len(nums):
        print("nums[" + str(i) + "] = " + str(nums[i]))
        i += 1
    end
end

def test_list_nested_access():
    print("=== NESTED LIST ACCESS ===")
    arr = [1, 2, 3, 4, 5]
    
    # Access with expression index
    i = 2
    print("arr[i] where i=2: " + str(arr[i]))
    print("arr[i+1]: " + str(arr[i + 1]))
    print("arr[len(arr)-1]: " + str(arr[len(arr) - 1]))
end

# =============================================================================
# SECTION 8: STRINGS
# =============================================================================

def test_string_concat():
    print("=== STRING CONCATENATION ===")
    a = "Hello"
    b = "World"
    c = a + " " + b + "!"
    print(c)
    
    # Multi-part concat
    result = "Part1" + "-" + "Part2" + "-" + "Part3"
    print(result)
end

def test_string_repeat():
    print("=== STRING REPEAT ===")
    s = "ab"
    print("'ab' * 5 = " + s * 5)
    print("'=' * 20 = " + "=" * 20)
end

def test_string_len():
    print("=== STRING LENGTH ===")
    s = "hello"
    print("len('hello') = " + str(len(s)))
    print("len('') = " + str(len("")))
    print("len('a b c') = " + str(len("a b c")))
end

def test_str_conversion():
    print("=== STR() CONVERSION ===")
    n = 42
    print("str(42) = '" + str(n) + "'")
    print("str(-100) = '" + str(-100) + "'")
    print("str(0) = '" + str(0) + "'")
end

# =============================================================================
# SECTION 9: EDGE CASES AND STRESS
# =============================================================================

def test_deeply_nested_calls():
    print("=== DEEPLY NESTED CALLS ===")
    # This tests the flattening system
    result = add3(mul2(1, 2), mul2(3, 4), mul2(5, 6))
    print("add3(mul2(1,2), mul2(3,4), mul2(5,6)) = " + str(result))
end

def add3(a, b, c):
    return a + b + c
end

def mul2(a, b):
    return a * b
end

def test_complex_conditions():
    print("=== COMPLEX CONDITIONS ===")
    arr = [10, 20, 30, 40, 50]
    
    # Condition with function call
    if len(arr) > 3:
        print("Array has more than 3 elements")
    end
    
    # Condition with index access
    if arr[0] < arr[len(arr) - 1]:
        print("First element less than last")
    end
    
    # Compound condition with calls
    if len(arr) > 0 and arr[0] == 10:
        print("Non-empty and first is 10")
    end
end

def test_return_complex_expr():
    print("=== RETURN COMPLEX EXPRESSIONS ===")
    arr = [5, 10, 15]
    
    result = get_sum_of_first_and_last(arr)
    print("sum of first and last: " + str(result))
end

def get_sum_of_first_and_last(arr):
    return arr[0] + arr[len(arr) - 1]
end

def test_nested_loops():
    print("=== NESTED LOOPS ===")
    for i in range(3):
        for j in range(3):
            print("(" + str(i) + "," + str(j) + ")")
        end
    end
end

def test_loop_with_function_calls():
    print("=== LOOP WITH FUNCTION CALLS ===")
    arr = [1, 2, 3, 4, 5]
    total = 0
    i = 0
    while i < len(arr):
        total += arr[i]
        i += 1
    end
    print("Sum: " + str(total))
end

# =============================================================================
# MAIN - RUN ALL TESTS
# =============================================================================

def main():
    print("=" * 60)
    print("AIMACRO COMPREHENSIVE STRESS TEST")
    print("=" * 60)
    print("")
    
    # Section 1: Types
    test_integer_literals()
    print("")
    test_string_literals()
    print("")
    test_boolean_literals()
    print("")
    
    # Section 2: Arithmetic
    test_arithmetic()
    print("")
    test_augmented_assignment()
    print("")
    
    # Section 3: Comparisons
    test_comparisons()
    print("")
    test_string_comparisons()
    print("")
    
    # Section 4: Logical
    test_logical_ops()
    print("")
    
    # Section 5: Control Flow
    test_if_elif_else()
    print("")
    test_while_loop()
    print("")
    test_for_loop()
    print("")
    
    # Section 6: Functions
    test_functions()
    print("")
    
    # Section 7: Lists
    test_list_basics()
    print("")
    test_list_append()
    print("")
    test_list_iteration()
    print("")
    test_list_nested_access()
    print("")
    
    # Section 8: Strings
    test_string_concat()
    print("")
    test_string_repeat()
    print("")
    test_string_len()
    print("")
    test_str_conversion()
    print("")
    
    # Section 9: Edge Cases
    test_deeply_nested_calls()
    print("")
    test_complex_conditions()
    print("")
    test_return_complex_expr()
    print("")
    test_nested_loops()
    print("")
    test_loop_with_function_calls()
    print("")
    
    print("=" * 60)
    print("ALL STRESS TESTS COMPLETE!")
    print("=" * 60)
end