# string_test.aim
# Test string operations and the new AIMacroString library

def test_repeat():
    print("=== STRING REPEAT ===")
    print("-" * 20)
    print("Stars:", "*" * 10)
    print("Dots:", "." * 5)
    print("-" * 20)
end

def test_basics():
    print("=== STRING BASICS ===")
    
    # Assignment and print
    msg = "Hello World"
    print("Message:", msg)
    
    # Empty string
    empty = ""
    print("Empty string test passed")
    
    # String with numbers
    mixed = "Value is 42"
    print(mixed)
end

def test_case():
    print("=== CASE CONVERSION ===")
    
    lower_str = "hello"
    upper_str = "WORLD"
    mixed_str = "HeLLo WoRLd"
    
    print("Original:", lower_str)
    print("Upper:", lower_str.upper())
    
    print("Original:", upper_str)
    print("Lower:", upper_str.lower())
    
    print("Original:", mixed_str)
    print("Upper:", mixed_str.upper())
    print("Lower:", mixed_str.lower())
end

def test_strip():
    print("=== STRIP/TRIM ===")
    
    padded = "   hello   "
    print("Original: [", padded, "]")
    print("Stripped: [", padded.strip(), "]")
    print("LStrip: [", padded.lstrip(), "]")
    print("RStrip: [", padded.rstrip(), "]")
end

def test_find():
    print("=== FIND/CONTAINS ===")
    
    text = "the quick brown fox"
    
    print("Text:", text)
    print("Find 'quick':", text.find("quick"))
    print("Find 'slow':", text.find("slow"))
    print("Find 'the':", text.find("the"))
    print("Find 'fox':", text.find("fox"))
end

def test_startswith_endswith():
    print("=== STARTSWITH / ENDSWITH ===")
    
    filename = "document.txt"
    url = "https://example.com"
    
    print("Filename:", filename)
    print("Ends with .txt:", filename.endswith(".txt"))
    print("Ends with .pdf:", filename.endswith(".pdf"))
    print("Starts with doc:", filename.startswith("doc"))
    print("Starts with img:", filename.startswith("img"))
    
    print("URL:", url)
    print("Starts with https:", url.startswith("https"))
    print("Starts with http:", url.startswith("http"))
end

def test_replace():
    print("=== REPLACE ===")
    
    original = "hello world world"
    print("Original:", original)
    print("Replace world->planet:", original.replace("world", "planet"))
    print("Replace o->0:", original.replace("o", "0"))
    print("Replace x->y:", original.replace("x", "y"))
end

def test_count():
    print("=== COUNT ===")
    
    text = "banana"
    print("Text:", text)
    print("Count 'a':", text.count("a"))
    print("Count 'na':", text.count("na"))
    print("Count 'x':", text.count("x"))
end

def test_split():
    print("=== SPLIT ===")
    
    csv = "apple,banana,cherry"
    print("CSV:", csv)
    
    # Note: We can't easily iterate results yet without for loops
    # Just test that split doesn't crash
    parts = csv.split(",")
    print("Split completed, parts created")
end

def main():
    print("=" * 50)
    print("AIMacro String Library Test Suite")
    print("=" * 50)
    
    test_repeat()
    test_basics()
    test_case()
    test_strip()
    test_find()
    test_startswith_endswith()
    test_replace()
    test_count()
    test_split()
    
    print("=" * 50)
    print("All string tests complete!")
    print("=" * 50)
end