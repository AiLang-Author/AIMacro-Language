# =============================================================================
# AIMACRO COMPREHENSIVE TEST SUITE
# Tests ALL supported features in one file
# =============================================================================

def add(a, b):
    return a + b
end

def multiply(x, y):
    result = x * y
    return result
end

def factorial(n):
    if n <= 1:
        return 1
    end
    return n * factorial(n - 1)
end

def is_even(num):
    remainder = num % 2
    if remainder == 0:
        return 1
    end
    return 0
end

def greet(name):
    msg = "Hello, " + name + "!"
    return msg
end

def count_down(start):
    i = start
    while i > 0:
        print(i)
        i -= 1
    end
    print("Blast off!")
end

def sum_range(n):
    total = 0
    for i in range(n):
        total += i
    end
    return total
end

def find_max(a, b, c):
    max_val = a
    if b > max_val:
        max_val = b
    end
    if c > max_val:
        max_val = c
    end
    return max_val
end

def test_break_continue():
    # Test break
    count = 0
    for i in range(10):
        if i == 5:
            break
        end
        count += 1
    end
    print("Break test (should be 5): " + str(count))
    
    # Test continue
    evens = 0
    for i in range(10):
        if i % 2 != 0:
            continue
        end
        evens += 1
    end
    print("Continue test (should be 5): " + str(evens))
end

def main():
    print("=" * 50)
    print("AIMACRO COMPREHENSIVE TEST SUITE")
    print("=" * 50)
    print("")
    
    # =========================================
    # SECTION 1: ARITHMETIC
    # =========================================
    print("--- SECTION 1: ARITHMETIC ---")
    
    a = 10
    b = 3
    print("a=10, b=3")
    print("a + b = " + str(a + b))
    print("a - b = " + str(a - b))
    print("a * b = " + str(a * b))
    print("a / b = " + str(a / b))
    print("a % b = " + str(a % b))
    print("a ** 2 = " + str(a ** 2))
    
    # Negative numbers
    neg = -5
    print("neg = " + str(neg))
    print("neg + 10 = " + str(neg + 10))
    print("")
    
    # =========================================
    # SECTION 2: COMPARISONS & BOOLEANS
    # =========================================
    print("--- SECTION 2: COMPARISONS ---")
    
    x = 5
    y = 10
    
    if x < y:
        print("PASS: 5 < 10")
    end
    if x <= 5:
        print("PASS: 5 <= 5")
    end
    if y > x:
        print("PASS: 10 > 5")
    end
    if y >= 10:
        print("PASS: 10 >= 10")
    end
    if x == 5:
        print("PASS: 5 == 5")
    end
    if x != y:
        print("PASS: 5 != 10")
    end
    
    # Boolean operators
    if x < y and y > 0:
        print("PASS: AND works")
    end
    if x > 100 or y == 10:
        print("PASS: OR works")
    end
    if not x > 100:
        print("PASS: NOT works")
    end
    print("")
    
    # =========================================
    # SECTION 3: FUNCTIONS
    # =========================================
    print("--- SECTION 3: FUNCTIONS ---")
    
    sum_result = add(15, 27)
    print("add(15, 27) = " + str(sum_result))
    
    prod = multiply(6, 7)
    print("multiply(6, 7) = " + str(prod))
    
    fact5 = factorial(5)
    print("factorial(5) = " + str(fact5))
    
    even_check = is_even(42)
    if even_check == 1:
        print("PASS: 42 is even")
    end
    
    max_val = find_max(42, 17, 99)
    print("find_max(42, 17, 99) = " + str(max_val))
    print("")
    
    # =========================================
    # SECTION 4: STRINGS
    # =========================================
    print("--- SECTION 4: STRINGS ---")
    
    s1 = "Hello"
    s2 = "World"
    s3 = s1 + " " + s2
    print("Concat: " + s3)
    
    # String repeat
    stars = "*" * 10
    print("Repeat: " + stars)
    
    # String length
    print("len(Hello) = " + str(len(s1)))
    
    # String equality
    test1 = "abc"
    test2 = "ab" + "c"
    if test1 == test2:
        print("PASS: Dynamic string equality")
    end
    
    # String from function
    greeting = greet("AIMacro")
    print(greeting)
    
    # str() conversion
    num = 12345
    num_as_str = str(num)
    print("Number as string: " + num_as_str)
    print("")
    
    # =========================================
    # SECTION 5: CONTROL FLOW
    # =========================================
    print("--- SECTION 5: CONTROL FLOW ---")
    
    # If/elif/else
    score = 85
    if score >= 90:
        print("Grade: A")
    elif score >= 80:
        print("Grade: B")
    elif score >= 70:
        print("Grade: C")
    else:
        print("Grade: F")
    end
    
    # While loop
    print("While countdown:")
    count = 3
    while count > 0:
        print(count)
        count -= 1
    end
    
    # For loop with range
    print("For loop 0-4:")
    for i in range(5):
        print(i)
    end
    
    # Break and continue
    test_break_continue()
    print("")
    
    # =========================================
    # SECTION 6: LISTS
    # =========================================
    print("--- SECTION 6: LISTS ---")
    
    nums = [10, 20, 30, 40, 50]
    print("List created with 5 elements")
    print("First element: " + str(nums[0]))
    print("Last element: " + str(nums[4]))
    print("Length: " + str(len(nums)))
    
    # Modify list
    nums[2] = 999
    print("After nums[2]=999: " + str(nums[2]))
    
    # Append
    nums.append(60)
    print("After append(60), length: " + str(len(nums)))
    
    # Sum list elements
    total = 0
    for i in range(5):
        total += nums[i]
    end
    print("Sum of first 5: " + str(total))
    
    # Empty list and build it
    built = []
    for i in range(3):
        built.append(i * 10)
    end
    print("Built list length: " + str(len(built)))
    print("")
    
    # =========================================
    # SECTION 7: AUGMENTED ASSIGNMENT
    # =========================================
    print("--- SECTION 7: AUGMENTED ASSIGNMENT ---")
    
    v = 10
    v += 5
    print("10 += 5 = " + str(v))
    v -= 3
    print("15 -= 3 = " + str(v))
    v *= 2
    print("12 *= 2 = " + str(v))
    v /= 4
    print("24 /= 4 = " + str(v))
    print("")
    
    # =========================================
    # SECTION 8: NESTED STRUCTURES
    # =========================================
    print("--- SECTION 8: NESTED STRUCTURES ---")
    
    # Nested loops
    print("Multiplication table 3x3:")
    for i in range(1, 4):
        line = ""
        for j in range(1, 4):
            product = i * j
            line = line + str(product) + " "
        end
        print(line)
    end
    
    # Nested conditionals
    a = 5
    b = 10
    c = 15
    if a < b:
        if b < c:
            print("PASS: Nested if (a < b < c)")
        end
    end
    
    # Nested function calls
    result = add(multiply(2, 3), multiply(4, 5))
    print("add(multiply(2,3), multiply(4,5)) = " + str(result))
    print("")
    
    # =========================================
    # SECTION 9: EDGE CASES
    # =========================================
    print("--- SECTION 9: EDGE CASES ---")
    
    # Zero handling
    print("0 * 100 = " + str(0 * 100))
    print("100 / 1 = " + str(100 / 1))
    
    # Empty string
    empty = ""
    print("Empty string length: " + str(len(empty)))
    
    # Single iteration loops
    single_count = 0
    for i in range(1):
        single_count += 1
    end
    print("range(1) iterations: " + str(single_count))
    
    # Zero iterations
    zero_count = 0
    for i in range(0):
        zero_count += 1
    end
    print("range(0) iterations: " + str(zero_count))
    
    # Large numbers
    big = 1000000
    print("Million: " + str(big))
    print("Million * 2: " + str(big * 2))
    print("")
    
    # =========================================
    # FINAL SUMMARY
    # =========================================
    print("=" * 50)
    print("ALL TESTS COMPLETE!")
    print("=" * 50)
end