# test_oop_parser.aim
# Test file to verify OOP parser fix for attribute access
# Expected: Should parse without hanging

# ============================================================================
# TEST 1: Basic class with attribute assignment (the hang trigger)
# ============================================================================
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    end
end

# ============================================================================
# TEST 2: Simple attribute read (should create ATTRIBUTE node)
# ============================================================================
def get_x(p):
    return p.x
end

# ============================================================================
# TEST 3: Mixed attribute and method (should distinguish correctly)
# ============================================================================
class Counter:
    def __init__(self):
        self.count = 0
    end
    
    def increment(self):
        self.count = self.count + 1
    end
    
    def get(self):
        return self.count
    end
end

# ============================================================================
# TEST 4: Chained attribute access
# ============================================================================
class Wrapper:
    def __init__(self, inner):
        self.inner = inner
    end
    
    def get_inner_x(self):
        return self.inner.x
    end
end

# ============================================================================
# TEST 5: Method call with attribute arguments
# ============================================================================
def distance(p1, p2):
    dx = p2.x - p1.x
    dy = p2.y - p1.y
    return dx * dx + dy * dy
end

# ============================================================================
# TEST 6: Main program using classes
# ============================================================================
p1 = Point(0, 0)
p2 = Point(3, 4)

# Attribute reads
x1 = p1.x
y1 = p1.y

# Method calls
c = Counter()
c.increment()
c.increment()
val = c.get()

# Distance calculation
d = distance(p1, p2)

print("Tests complete")